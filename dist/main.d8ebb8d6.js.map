{"version":3,"sources":["scripts/main.js","../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["signIn","provider","firebase","auth","GoogleAuthProvider","signInWithPopup","signOut","initFirebaseAuth","onAuthStateChanged","authStateObserver","getProfilePicUrl","currentUser","photoURL","getUserName","displayName","isUserSignedIn","saveMessage","messageText","firestore","collection","add","name","text","profilePicUrl","timestamp","FieldValue","serverTimestamp","catch","error","console","loadMessages","query","orderBy","limit","onSnapshot","snapshot","docChanges","forEach","change","type","deleteMessage","doc","id","message","data","displayMessage","imageUrl","saveImageMessage","file","LOADING_IMAGE_URL","then","messageRef","filePath","uid","storage","ref","put","fileSnapshot","getDownloadURL","url","update","storageUri","metadata","fullPath","saveMessagingDeviceToken","messaging","getToken","currentToken","log","set","requestNotificationsPermissions","requestPermission","onMediaFileSelected","event","preventDefault","target","files","imageFormElement","reset","match","timeout","signInSnackbarElement","MaterialSnackbar","showSnackbar","checkSignedInWithMessage","onMessageFormSubmit","e","messageInputElement","value","resetMaterialTextfield","toggleButton","user","userName","userPicElement","style","backgroundImage","addSizeToGoogleProfilePic","userNameElement","textContent","removeAttribute","signOutButtonElement","signInButtonElement","setAttribute","element","parentNode","MaterialTextfield","boundUpdateClassesHandler","MESSAGE_TEMPLATE","indexOf","div","document","getElementById","removeChild","createAndInsertMessage","container","createElement","innerHTML","firstChild","toMillis","Date","now","existingMessages","messageListElement","children","length","appendChild","messageListNode","messageListNodeTime","getAttribute","Error","nextSibling","insertBefore","picUrl","querySelector","messageElement","replace","image","addEventListener","scrollTop","scrollHeight","src","getTime","setTimeout","classList","focus","submitButtonElement","checkSetup","window","app","Function","options","alert","messageFormElement","imageButtonElement","mediaCaptureElement","click","performance","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","deps","cached","cache","some","cb"],"mappings":"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","file":"main.d8ebb8d6.js","sourceRoot":"..","sourcesContent":["/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Signs-in Friendly Chat.\nfunction signIn() {\n  // Sign in Firebase using popup auth and Google as the identity provider.\n  var provider = new firebase.auth.GoogleAuthProvider();\n  firebase.auth().signInWithPopup(provider);\n}\n\n// Signs-out of Friendly Chat.\nfunction signOut() {\n  // Sign out of Firebase.\n  firebase.auth().signOut();\n}\n\n// Initiate firebase auth.\nfunction initFirebaseAuth() {\n  // Listen to auth state changes.\n  firebase.auth().onAuthStateChanged(authStateObserver);\n}\n\n// Returns the signed-in user's profile Pic URL.\nfunction getProfilePicUrl() {\n  return firebase.auth().currentUser.photoURL || '/images/profile_placeholder.png';\n}\n\n// Returns the signed-in user's display name.\nfunction getUserName() {\n  return firebase.auth().currentUser.displayName;\n}\n\n// Returns true if a user is signed-in.\nfunction isUserSignedIn() {\n  return !!firebase.auth().currentUser;\n}\n\n// Saves a new message on the Cloud Firestore.\nfunction saveMessage(messageText) {\n  // Add a new message entry to the Firebase database.\n  return firebase.firestore().collection('messages').add({\n    name: getUserName(),\n    text: messageText,\n    profilePicUrl: getProfilePicUrl(),\n    timestamp: firebase.firestore.FieldValue.serverTimestamp()\n  }).catch(function(error) {\n    console.error('Error writing new message to Firebase Database', error);\n  });\n}\n\n// Loads chat messages history and listens for upcoming ones.\nfunction loadMessages() {\n  // Create the query to load the last 12 messages and listen for new ones.\n  var query = firebase.firestore().collection('messages').orderBy('timestamp', 'desc').limit(12);\n  \n  // Start listening to the query.\n  query.onSnapshot(function(snapshot) {\n    snapshot.docChanges().forEach(function(change) {\n      if (change.type === 'removed') {\n        deleteMessage(change.doc.id);\n      } else {\n        var message = change.doc.data();\n        displayMessage(change.doc.id, message.timestamp, message.name,\n                      message.text, message.profilePicUrl, message.imageUrl);\n      }\n    });\n  });\n}\n\n// Saves a new message containing an image in Firebase.\n// This first saves the image in Firebase storage.\nfunction saveImageMessage(file) {\n  // 1 - We add a message with a loading icon that will get updated with the shared image.\n  firebase.firestore().collection('messages').add({\n    name: getUserName(),\n    imageUrl: LOADING_IMAGE_URL,\n    profilePicUrl: getProfilePicUrl(),\n    timestamp: firebase.firestore.FieldValue.serverTimestamp()\n  }).then(function(messageRef) {\n    // 2 - Upload the image to Cloud Storage.\n    var filePath = firebase.auth().currentUser.uid + '/' + messageRef.id + '/' + file.name;\n    return firebase.storage().ref(filePath).put(file).then(function(fileSnapshot) {\n      // 3 - Generate a public URL for the file.\n      return fileSnapshot.ref.getDownloadURL().then((url) => {\n        // 4 - Update the chat message placeholder with the imageâ€™s URL.\n        return messageRef.update({\n          imageUrl: url,\n          storageUri: fileSnapshot.metadata.fullPath\n        });\n      });\n    });\n  }).catch(function(error) {\n    console.error('There was an error uploading a file to Cloud Storage:', error);\n  });\n}\n\n// Saves the messaging device token to the datastore.\nfunction saveMessagingDeviceToken() {\n  firebase.messaging().getToken().then(function(currentToken) {\n    if (currentToken) {\n      console.log('Got FCM device token:', currentToken);\n      // Saving the Device Token to the datastore.\n      firebase.firestore().collection('fcmTokens').doc(currentToken)\n          .set({uid: firebase.auth().currentUser.uid});\n    } else {\n      // Need to request permissions to show notifications.\n      requestNotificationsPermissions();\n    }\n  }).catch(function(error){\n    console.error('Unable to get messaging token.', error);\n  });\n}\n\n// Requests permissions to show notifications.\nfunction requestNotificationsPermissions() {\n  console.log('Requesting notifications permission...');\n  firebase.messaging().requestPermission().then(function() {\n    // Notification permission granted.\n    saveMessagingDeviceToken();\n  }).catch(function(error) {\n    console.error('Unable to get permission to notify.', error);\n  });\n}\n\n// Triggered when a file is selected via the media picker.\nfunction onMediaFileSelected(event) {\n  event.preventDefault();\n  var file = event.target.files[0];\n\n  // Clear the selection in the file picker input.\n  imageFormElement.reset();\n\n  // Check if the file is an image.\n  if (!file.type.match('image.*')) {\n    var data = {\n      message: 'You can only share images',\n      timeout: 2000\n    };\n    signInSnackbarElement.MaterialSnackbar.showSnackbar(data);\n    return;\n  }\n  // Check if the user is signed-in\n  if (checkSignedInWithMessage()) {\n    saveImageMessage(file);\n  }\n}\n\n// Triggered when the send new message form is submitted.\nfunction onMessageFormSubmit(e) {\n  e.preventDefault();\n  // Check that the user entered a message and is signed in.\n  if (messageInputElement.value && checkSignedInWithMessage()) {\n    saveMessage(messageInputElement.value).then(function() {\n      // Clear message text field and re-enable the SEND button.\n      resetMaterialTextfield(messageInputElement);\n      toggleButton();\n    });\n  }\n}\n\n// Triggers when the auth state change for instance when the user signs-in or signs-out.\nfunction authStateObserver(user) {\n  if (user) { // User is signed in!\n    // Get the signed-in user's profile pic and name.\n    var profilePicUrl = getProfilePicUrl();\n    var userName = getUserName();\n\n    // Set the user's profile pic and name.\n    userPicElement.style.backgroundImage = 'url(' + addSizeToGoogleProfilePic(profilePicUrl) + ')';\n    userNameElement.textContent = userName;\n\n    // Show user's profile and sign-out button.\n    userNameElement.removeAttribute('hidden');\n    userPicElement.removeAttribute('hidden');\n    signOutButtonElement.removeAttribute('hidden');\n\n    // Hide sign-in button.\n    signInButtonElement.setAttribute('hidden', 'true');\n\n    // We save the Firebase Messaging Device token and enable notifications.\n    saveMessagingDeviceToken();\n  } else { // User is signed out!\n    // Hide user's profile and sign-out button.\n    userNameElement.setAttribute('hidden', 'true');\n    userPicElement.setAttribute('hidden', 'true');\n    signOutButtonElement.setAttribute('hidden', 'true');\n\n    // Show sign-in button.\n    signInButtonElement.removeAttribute('hidden');\n  }\n}\n\n// Returns true if user is signed-in. Otherwise false and displays a message.\nfunction checkSignedInWithMessage() {\n  // Return true if the user is signed in Firebase\n  if (isUserSignedIn()) {\n    return true;\n  }\n\n  // Display a message to the user using a Toast.\n  var data = {\n    message: 'You must sign-in first',\n    timeout: 2000\n  };\n  signInSnackbarElement.MaterialSnackbar.showSnackbar(data);\n  return false;\n}\n\n// Resets the given MaterialTextField.\nfunction resetMaterialTextfield(element) {\n  element.value = '';\n  element.parentNode.MaterialTextfield.boundUpdateClassesHandler();\n}\n\n// Template for messages.\nvar MESSAGE_TEMPLATE =\n    '<div class=\"message-container\">' +\n      '<div class=\"spacing\"><div class=\"pic\"></div></div>' +\n      '<div class=\"message\"></div>' +\n      '<div class=\"name\"></div>' +\n    '</div>';\n\n// Adds a size to Google Profile pics URLs.\nfunction addSizeToGoogleProfilePic(url) {\n  if (url.indexOf('googleusercontent.com') !== -1 && url.indexOf('?') === -1) {\n    return url + '?sz=150';\n  }\n  return url;\n}\n\n// A loading image URL.\nvar LOADING_IMAGE_URL = 'https://www.google.com/images/spin-32.gif?a';\n\n// Delete a Message from the UI.\nfunction deleteMessage(id) {\n  var div = document.getElementById(id);\n  // If an element for that message exists we delete it.\n  if (div) {\n    div.parentNode.removeChild(div);\n  }\n}\n\nfunction createAndInsertMessage(id, timestamp) {\n  const container = document.createElement('div');\n  container.innerHTML = MESSAGE_TEMPLATE;\n  const div = container.firstChild;\n  div.setAttribute('id', id);\n\n  // If timestamp is null, assume we've gotten a brand new message.\n  // https://stackoverflow.com/a/47781432/4816918\n  timestamp = timestamp ? timestamp.toMillis() : Date.now();\n  div.setAttribute('timestamp', timestamp);\n\n  // figure out where to insert new message\n  const existingMessages = messageListElement.children;\n  if (existingMessages.length === 0) {\n    messageListElement.appendChild(div);\n  } else {\n    let messageListNode = existingMessages[0];\n\n    while (messageListNode) {\n      const messageListNodeTime = messageListNode.getAttribute('timestamp');\n\n      if (!messageListNodeTime) {\n        throw new Error(\n          `Child ${messageListNode.id} has no 'timestamp' attribute`\n        );\n      }\n\n      if (messageListNodeTime > timestamp) {\n        break;\n      }\n\n      messageListNode = messageListNode.nextSibling;\n    }\n\n    messageListElement.insertBefore(div, messageListNode);\n  }\n\n  return div;\n}\n\n// Displays a Message in the UI.\nfunction displayMessage(id, timestamp, name, text, picUrl, imageUrl) {\n  var div = document.getElementById(id) || createAndInsertMessage(id, timestamp);\n\n  // profile picture\n  if (picUrl) {\n    div.querySelector('.pic').style.backgroundImage = 'url(' + addSizeToGoogleProfilePic(picUrl) + ')';\n  }\n\n  div.querySelector('.name').textContent = name;\n  var messageElement = div.querySelector('.message');\n\n  if (text) { // If the message is text.\n    messageElement.textContent = text;\n    // Replace all line breaks by <br>.\n    messageElement.innerHTML = messageElement.innerHTML.replace(/\\n/g, '<br>');\n  } else if (imageUrl) { // If the message is an image.\n    var image = document.createElement('img');\n    image.addEventListener('load', function() {\n      messageListElement.scrollTop = messageListElement.scrollHeight;\n    });\n    image.src = imageUrl + '&' + new Date().getTime();\n    messageElement.innerHTML = '';\n    messageElement.appendChild(image);\n  }\n  // Show the card fading-in and scroll to view the new message.\n  setTimeout(function() {div.classList.add('visible')}, 1);\n  messageListElement.scrollTop = messageListElement.scrollHeight;\n  messageInputElement.focus();\n}\n\n// Enables or disables the submit button depending on the values of the input\n// fields.\nfunction toggleButton() {\n  if (messageInputElement.value) {\n    submitButtonElement.removeAttribute('disabled');\n  } else {\n    submitButtonElement.setAttribute('disabled', 'true');\n  }\n}\n\n// Checks that the Firebase SDK has been correctly setup and configured.\nfunction checkSetup() {\n  if (!window.firebase || !(firebase.app instanceof Function) || !firebase.app().options) {\n    window.alert('You have not configured and imported the Firebase SDK. ' +\n        'Make sure you go through the codelab setup instructions and make ' +\n        'sure you are running the codelab using `firebase serve`');\n  }\n}\n\n// Checks that Firebase has been imported.\ncheckSetup();\n\n// Shortcuts to DOM Elements.\nvar messageListElement = document.getElementById('messages');\nvar messageFormElement = document.getElementById('message-form');\nvar messageInputElement = document.getElementById('message');\nvar submitButtonElement = document.getElementById('submit');\nvar imageButtonElement = document.getElementById('submitImage');\nvar imageFormElement = document.getElementById('image-form');\nvar mediaCaptureElement = document.getElementById('mediaCapture');\nvar userPicElement = document.getElementById('user-pic');\nvar userNameElement = document.getElementById('user-name');\nvar signInButtonElement = document.getElementById('sign-in');\nvar signOutButtonElement = document.getElementById('sign-out');\nvar signInSnackbarElement = document.getElementById('must-signin-snackbar');\n\n// Saves message on form submit.\nmessageFormElement.addEventListener('submit', onMessageFormSubmit);\nsignOutButtonElement.addEventListener('click', signOut);\nsignInButtonElement.addEventListener('click', signIn);\n\n// Toggle for the button.\nmessageInputElement.addEventListener('keyup', toggleButton);\nmessageInputElement.addEventListener('change', toggleButton);\n\n// Events for image upload.\nimageButtonElement.addEventListener('click', function(e) {\n  e.preventDefault();\n  mediaCaptureElement.click();\n});\nmediaCaptureElement.addEventListener('change', onMediaFileSelected);\n\n// initialize Firebase\ninitFirebaseAuth();\n\n // TODO: Enable Firebase Performance Monitoring.\nfirebase.performance();\n\n// We load currently existing chat messages and listen to new ones.\nloadMessages();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] âœ¨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] ðŸš¨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">ðŸš¨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}